<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Weather Stream Dashboard</title>
  <meta name="description" content="Live weather snapshot from AWS S3 + CloudFront" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="bg"></div>

  <header class="wrap header">
    <div class="brand">
      <div class="logo" aria-hidden="true">â˜ï¸</div>
      <div>
        <h1>Weather Stream Dashboard</h1>
        <p class="sub">Live snapshot from S3 + CloudFront</p>
      </div>
    </div>

    <div class="controls">
      <label class="field">
        <span class="fieldLabel">City</span>
        <select id="citySelect" aria-label="Select city"></select>
      </label>

      <button id="refreshBtn" class="btn" type="button" title="Refresh now">
        <span class="btnIcon" aria-hidden="true">âŸ³</span>
        Refresh
      </button>
    </div>
  </header>

  <main class="wrap">
    <section id="staleBanner" class="banner hidden" role="status" aria-live="polite">
      <span class="bannerIcon" aria-hidden="true">âš ï¸</span>
      <span id="staleText">Data may be stale.</span>
    </section>

    <section class="kpis" aria-label="KPIs">
      <div class="card kpi">
        <div class="kpiTop">
          <div class="kpiIcon" aria-hidden="true">ğŸŒ¡ï¸</div>
          <div class="kpiMeta">
            <div class="label">Temperature</div>
            <div class="value" id="kpiTemp">â€”</div>
            <div class="delta" id="kpiTempDelta">â€”</div>
          </div>
        </div>
      </div>

      <div class="card kpi">
        <div class="kpiTop">
          <div class="kpiIcon" aria-hidden="true">ğŸ’§</div>
          <div class="kpiMeta">
            <div class="label">Humidity</div>
            <div class="value" id="kpiHumidity">â€”</div>
            <div class="delta" id="kpiHumidityDelta">â€”</div>
          </div>
        </div>
      </div>

      <div class="card kpi">
        <div class="kpiTop">
          <div class="kpiIcon" aria-hidden="true">ğŸŒ¬ï¸</div>
          <div class="kpiMeta">
            <div class="label">Wind</div>
            <div class="value" id="kpiWind">â€”</div>
            <div class="delta" id="kpiWindDelta">â€”</div>
          </div>
        </div>
      </div>

      <!-- NEW: Coldest city -->
      <div class="card kpi">
        <div class="kpiTop">
          <div class="kpiIcon" aria-hidden="true">â„ï¸</div>
          <div class="kpiMeta">
            <div class="label">Coldest City</div>
            <div class="value small" id="kpiColdest">â€”</div>
          </div>
        </div>
      </div>

      <!-- NEW: Windiest city -->
      <div class="card kpi">
        <div class="kpiTop">
          <div class="kpiIcon" aria-hidden="true">ğŸ’¨</div>
          <div class="kpiMeta">
            <div class="label">Windiest City</div>
            <div class="value small" id="kpiWindiest">â€”</div>
          </div>
        </div>
      </div>

      <div class="card kpi">
        <div class="kpiTop">
          <div class="kpiIcon" aria-hidden="true">â›…</div>
          <div class="kpiMeta">
            <div class="label">Condition</div>
            <div class="value small" id="kpiCond">â€”</div>
          </div>
        </div>
      </div>

      <div class="card kpi">
        <div class="kpiTop">
          <div class="kpiIcon" aria-hidden="true">ğŸ•’</div>
          <div class="kpiMeta">
            <div class="label">Last Updated (UTC)</div>
            <div class="value small" id="kpiUpdated">â€”</div>
          </div>
        </div>
      </div>
    </section>

    <section class="card panel">
      <div class="panelHead">
        <div>
          <h2>Current Conditions</h2>
          <div class="muted" id="generatedUtc">â€”</div>
        </div>

        <div id="statusPill" class="pill" aria-live="polite">
          <span class="dot" aria-hidden="true"></span>
          <span id="statusText">Loadingâ€¦</span>
        </div>
      </div>

      <div class="tableWrap">
        <table class="table" role="table">
          <thead>
            <tr>
              <th>City</th>
              <th class="num">Temp</th>
              <th class="num">Feels</th>
              <th class="num">Humidity</th>
              <th class="num">Wind</th>
              <th class="num">Pressure</th>
              <th>Condition</th>
              <th>Observed (UTC)</th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>

      <div class="panelFoot">
        <span class="muted">Source: OpenWeatherMap â†’ Lambda â†’ SQS â†’ S3 â†’ CloudFront</span>
      </div>
    </section>

    <footer class="wrap foot">
      <span class="muted">Â© Weather Stream â€¢ Serverless AWS data pipeline</span>
    </footer>
  </main>

  <script src="app.js"></script>
</body>
</html>
